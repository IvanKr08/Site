<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ru">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>IvanKr08 - MODPlay</title>
		<link rel="shortcut icon" href="gfx/favicon.gif">
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<!-- MAIN TABLE +-->
		<table class="maintable" align="center">
		<tbody>
			<!-- MENU +-->
			<tr><td class="menu" align="center">
				<a href="index.html">Главная</a>
				<span>|</span>
				<a href="img.html">Галерея</a>
				<span>|</span>
				<a href="intr.html">Интересное</a>
			</td></tr>
			<!-- ==== +-->
			
			<!-- MAIN +-->
			<tr><td class="main">
			<table cellpadding="4">
			<tbody>
				<!-- TITLE +-->
				<tr><td align="center">
					<h1>MODPlay</h1>
					<hr>
				</td></tr>
				<!-- ===== +-->

				<!-- TRACKERS +-->
				<tr><td align="left">
					<div class="pfaar" align="center">
						<img src="pfaa/modplay.gif" alt="*Вывод программы"><br>
						<i>Внешний вид MOD партитуры<br>Пример из старой версии MODPlay<br>(Нота Инструмент Эффект)</i>
						<hr>
					</div>
					<h2 class="hnarrow">Вступление</h2>
					На данный момент последний, после сайта проект, датированный серединой июля. 
					Забросив эмулятор в конце весны, поковыряв IDA Pro и написав универсальный кейген к тестовым программам,
					у меня в голове появилась новая идея: свой проигрыватель для трекерной музыки (MODPlay).
					Это занятие еще мудренее эмулятора старческого процессора, но немного приближает к другой, еще более несбыточной мечте: (ц/с)ветомузыке. 
					
					<p>
					Трекерные файлы напоминает MIDI, т.е это именно партитура произведения, а не просто запись звуковых волн. Но, в отличие от MIDI, трекереные 
					файлы содержат и звукозаписи инструментов. MIDI же использует звуки из внешнего файла, что приводит к принципиально разному звучанию 
					в разных проигрывателях. Такая особенность трекерных файлов связана с их первоисточником, компьютером Amiga.
					</p>
					
					<h3>ПК Amiga и ранние трекеры</h3>
					Amiga на свое время (1985) обладала революционными мультимедийными возможностями и технологиями. В ней <s>впервые</s> 
					появились Plug-And-Play, графическая многозадачная ОС, блиттер, видеорежим HAM и многое другое. Некоторые из этих технологий существовали 
					и раньше, но именно она смогла их популяризировать. Главным "чудом" являлся чип Paula, содержащий четырехканальный стереосемплер. До AdLib 
					оставалось еще 2 года (И то, он будет способен только на MIDI весьма специфичного звучания (FM-синтез), напоминающего старые мобильные телефоны),
					саундбластер появится в 1989, и обретет популярность только через еще пару лет, а 98% IBM-PC оснащались исключительно однобитным спикером
					(И предназначенным в первую очередь для сообщений BIOS. Он и сейчас везде предустановлен, но уже как пьезопищалка, а не динамик).
					Спикер в сравнении с Paula это как велосипед "Украина" и Мерседес бизнес-класса, которому задаешь направление и он едет сам.
					В разное время разные люди пытались "приспособить" сие устройство к непрофессиональному использованию. 
					Одной из таких попыток был Ultimate Soundtracker. Он был коммерческий, нестабильный и жутко неудобный, и, ожидаемо, спросом не пользовался. 
					Потом его взломали и переписали в NoiseTracker, а немного позднее появился уже официально признанный ProTracker. Именно ProTracker ввел 
					современный подвид .mod и стал де-факто стандартом в трекерной музыке.
					
					<p>
					Позже, с распространением нормальных звуковых карт в IBM-PC, развитие переместилось на них. Там микширование было уже программное, 
					сильно грузящее процессор, и позволяющее использовать большее количество каналов, ограниченное только здравым смыслом и мощностью CPU (Обычно до 32х). 
					Это уже трекеры второго поколения. 
					Наиболее известными трекерами второго поколения являются ScreamTracker 3 (.s3m), FastTracker 2 (.xm) и ImpulseTracker (.it) (В хронологическом порядке).
					</p>
					
					<h3>Прогресс написания MOD-плеера</h3>
					MODPlay предназначен именно для классических, четырехканальных MOD файлов ProTracker. Основная проблема заключается в том, что и ProTracker,
					и чип Paula были крайне специфичными, нелогичными и запутанными штуками, про которые найти подробную информацию практически невозможно.
					К примеру, если цикл семпла (Звука инструмента) начинается с нулевого слова, а заканчивается раньше его конца (В смысле раньше конца семпла)
					(А адресуется это гэ по двухбайтным словам), то он сначала проигрывается до конца (За пределы цикла), а потом лишь нормально зацикливается.
					Большинство команд (Громкость, портаменто, вибрато, изменение темпа и т.д) начинают работать только на второй такт линии, но при этом не все.
					Таких приколов на самом деле гораздо больше, это просто те, которые проще всего было описать.

					<p>
					На данный момент, б<u>о</u>льшая часть этих особенностей у меня просто игнорируется, что приводит ко множеству самых интересных глюков.
					</p>
					
					<h2>Послесловие</h2>
					<s><a href="files/MODPlay.zip">Скачать EXE</a></s>.
					Обожаю современные антивирусы. Жрут все, от кейгенов до самописных утилит, которые даже на диск не лезут. Все, кроме настоящих угроз. Вирусов там нет,
					перепроверил в IDA Pro, а +- нормальные антивирусы (MalwareBytes, DrWeb, Kaspersky, ESET-NOD32) ничего подозрительного и так там не видят. Очередной раз убеждаюсь,
					что MS Defender в первую очередь помогает от взломанных программ, во вторую от ваших собственных, а от вирусов только в последнюю.
					
					<p>
					Кода нет, он еще и близко не готов к демонстрации. Песня зашита в EXE, "occ_san_geen.mod".
					Воспроизведение начинается сразу после запуска. Вывод партитуры сделан максимально неправильно, и так (Пихать WriteConsole() в waveOutProc()) делать нельзя ни при каких условиях.
					Времени переписывать не было, кое как работает.
					</p>
					
					<p>
					Трекерные файлы можно найти <a href="intr.html#modules">в моей коллекции</a>, <a href="https://modarchive.org/index.php">ModArchive</a> и
					<a href="https://ftp.modland.com/pub/modules/">ModLand</a> (Самый наполненный).
					</p>
				</td></tr>
				<!-- ======== +-->
			</tbody>
			</table>
			</td></tr>
			<!-- ==== +-->
			
			<!-- FOOTER +-->
			<tr><td class="footer" align="center">
				<!-- INFORMERS +-->
				<a href="http://links.twibright.com/">
				<img src="./informers/links.gif" alt="LinksBrowser"></a>
				
				<a href="https://files.scene.org/">
				<img src="./informers/amigademo.gif" alt="AmigaDemo"></a>
				
				<a href="https://rn10950.github.io/RetroZillaWeb/">
				<img src="./informers/retrozilla.gif" alt="RetroZilla"></a>
				
				<img src="./informers/css.gif" alt="">
				
				<a href="https://modarchive.org/index.php">
				<img src="./informers/modarchive.gif" alt="ModArchive"></a>
				
				<img src="./informers/npp.gif" alt="">
				
				<a href="https://openmpt.org/">
				<img src="./informers/openmpt.gif" alt="OpenMPT"></a>
				
				<img src="./informers/chrome.gif" alt="">
				
				<a href="https://www.haiku-os.org/">
				<img src="./informers/haikuos.gif" alt="HaikuOS"></a>
				<!-- ========= +-->
				
				<h2 align="center" style="margin: 0">Здесь пока ничего нет, но вы держитесь!</h2>
				Программист - это человек, который сначала долго думает, чтобы потом ничего не делать. (C)
			</td></tr>
			<!-- ====== +-->
		</tbody></table>
		<!-- ========== +-->
	</body>
</html>
